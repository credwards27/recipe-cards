/* ipc-error.js
    
    Helper function to remove extra content added to IPC error messages.
*/

/* Normalizes an error message string to remove extra IPC content.
    
    err - Error object to normalize.
    parse - True to parse the normalized error message as JSON and return the
        result, false to return the normalized message as a string. Defaults to
        false.
    
    Returns the normalized error message.
*/
module.exports = (err, parse) => {
    let msg = err.message,
        regex = new RegExp(
            "^Uncaught\\s+Error:\\s+Error\\s+invoking\\s+remote\\s+method\\s+" +
                "'.+':\\s+Error:\\s+"
        );
    
    msg = msg.replace(regex, "");
    
    return parse ? JSON.parse(msg) : msg;
};
