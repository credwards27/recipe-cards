/* instructions-card.js
    
    Recipe instructions card.
*/

// Dependencies.
const { PureComponent } = require("react"),
    { sanitize: purify } = require("dompurify"),
    ALLOWED_HTML = require("app/all/allowed-html.js");

/* Recipe instructions card component.
*/
class InstructionsCard extends PureComponent {
    //
    // STATIC PROPERTIES
    //
    
    //
    // PROPERTIES
    //
    
    //
    // STATIC METHODS
    //
    
    //
    // METHODS
    //
    
    /* Gets DOM elements for the instructions list.
        
        instructions - Instruction string or array of strings. Falsy and
            non-string values will be skipped.
        
        Returns DOM structure for the instructions list.
    */
    getInstructionsDom(instructions) {
        instructions = typeof instructions === "string" ? instructions : "";
        instructions = instructions.trim();
        
        instructions = purify(instructions, {
            ALLOWED_TAGS: Object.keys(ALLOWED_HTML)
        });
        
        return (
            <section
                className="columns col-12"
                dangerouslySetInnerHTML={{ __html: instructions }}
            ></section>
        );
    }
    
    /* Renders the component.
    */
    render() {
        let instructions = this.getInstructionsDom(this.props.instructions);
        
        return (
            <article className="recipe-card instructions grid">
                
                <header className="row">
                    
                    <h2 className="col-12">Instructions</h2>
                    
                </header>
                
                {instructions}
                
            </article>
        );
    }
}

module.exports = InstructionsCard;
